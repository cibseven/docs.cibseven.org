<!DOCTYPE html>
<html class="no-js">
<head>
  
  <meta charset="utf-8" />

  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

  <meta name="viewport" content="width=device-width" />

  <meta name="description" content="documentation of CIB seven" />
  <meta name="keywords" content="camunda, cib seven, open source, free, Apache License, Apache 2.0, workflow, BPMN, BPMN 2.0, camunda.org, bpm, BPMS, engine, platform, process, automation, community, documentation" />
  <meta name="author" content="CIB software, CIB seven community" />
  

  <title>Executing automated steps (2/6) | docs.cibseven.org</title>

  <meta name="generator" content="Hugo 0.136.4">
  <link rel="shortcut icon" href="/get-started/img/favicon.ico" type="image/x-icon" />

  

  <link rel="stylesheet" href="/get-started/css/docs.4514ad9d3348b03834bdeeb55c9ba0c48ac8456db7fba0ef125ec832d89ed339.css" integrity="sha256-RRStnTNIsDg0ve61XJugxIrIRW23&#43;6DvEl7IMtie0zk=">
  <link rel="canonical" href="/get-started/quick-start/service-task/" />
</head>
<body class="">

<nav class="navbar navbar-fixed-top">
  <div class="navbar-container">
    <div class="navbar-header">
      <a href="/" id="logolink">
      <img src="/get-started/img/logo.png" style="padding:0 5px 7px 0;max-width:75%">
        <span class="site-name">Docs</span>
      </a>
    </div>

    <ul class="header-menu">
      
      <li  class="active"  ><a href="/get-started">Get Started</a></li>
      
      <li  ><a href="/manual">CIB seven</a></li>
      
      <li  ><a href="/security">Security</a></li>
      
    </ul>

    <button class="site-menu-toggle">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <div class="search-field">
      <input type="search" class="search-input" placeholder="Search…" />
    </div>

    <ul class="external-menu">
      <li class="external"><a href="https://cibseven.org">cibseven.org</a></li>
    </ul>
  </div>
</nav>

<div class="search-results">
  <ul class="results-list">
  </ul>
  <footer>
    <button class="btn btn-default page previous">
      <span class="glyphicon glyphicon-chevron-left"></span>
    </button>

    <button class="search-close btn btn-default">
      <span class="glyphicon glyphicon-remove"></span>
    </button>

    <button class="btn btn-default page next">
      <span class="glyphicon glyphicon-chevron-right"></span>
    </button>
  </footer>
</div>

<div class="search-underlay"></div>

<nav class="site-menu">
  





<ul class="site-menu-items">
  
    
  <li>
    
      <a href="/get-started/quick-start/" >Quick Start (Java / JS)</a>
      <ul>
        
          
  <li>
    
      <a href="/get-started/quick-start/install/" >Download and Installation</a>
    
  </li>

        
          
  <li>
    
      <a href="/get-started/quick-start/service-task/" >Executable Process</a>
    
  </li>

        
          
  <li>
    
      <a href="/get-started/quick-start/deploy/" >Deploy the Process</a>
    
  </li>

        
          
  <li>
    
      <a href="/get-started/quick-start/user-task/" >Involve Humans</a>
    
  </li>

        
          
  <li>
    
      <a href="/get-started/quick-start/gateway/" >Make It Dynamic</a>
    
  </li>

        
          
  <li>
    
      <a href="/get-started/quick-start/decision-automation/" >Decision Automation</a>
    
  </li>

        
      </ul>
    
  </li>

  
    
  <li>
    
      <a href="/get-started/spring-boot/" >Spring Boot</a>
      <ul>
        
          
  <li>
    
      <a href="/get-started/spring-boot/project-setup/" >Project Setup</a>
    
  </li>

        
          
  <li>
    
      <a href="/get-started/spring-boot/configuration/" >Configuration</a>
    
  </li>

        
          
  <li>
    
      <a href="/get-started/spring-boot/model/" >Model a Process</a>
    
  </li>

        
      </ul>
    
  </li>

  
    
  <li>
    
      <a href="/get-started/dmn/" >DMN</a>
      <ul>
        
          
  <li>
    
      <a href="/get-started/dmn/install/" >Download and Installation</a>
    
  </li>

        
          
  <li>
    
      <a href="/get-started/dmn/project-setup/" >Project Setup</a>
    
  </li>

        
          
  <li>
    
      <a href="/get-started/dmn/model/" >Create a Decision Table</a>
    
  </li>

        
          
  <li>
    
      <a href="/get-started/dmn/deploy/" >Evaluate and Deploy the Decision Table</a>
    
  </li>

        
          
  <li>
    
      <a href="/get-started/dmn/drg/" >Decision Requirements Graph</a>
    
  </li>

        
      </ul>
    
  </li>

  
    
  <li>
    
      <a href="/get-started/apache-maven/" >Maven Coordinates</a>
    
  </li>

  
</ul>


</nav>

<div class="page-wrapper">


<div class="page-content">
  <div class="container-fluid">
    <div class="col-xs-12 content-header">
      <h1 class="page-title">Executing automated steps (2/6)</h1>
    </div>

    <div class="col-xs-12 content-text">
      <p>In this section, you&rsquo;ll learn how to create your first BPMN 2.0 process with the Camunda Modeler and how to execute automated steps. Start by opening up Camunda Modeler.</p>
<h1 id="create-a-new-bpmn-diagram">Create a new BPMN Diagram</h1>
<p>Create a new BPMN diagram by clicking <em>File &gt; New File &gt; BPMN Diagram (Camunda 7)</em>.</p>
<figure class="image">
  <span><img
      src="../img/modeler-new-bpmn-diagram.png"
       /></span>
</figure>

<h2 id="start-with-a-simple-process">Start with a Simple Process</h2>
<p>Start by modeling a simple process.</p>
<figure class="image">
  <span><img
      src="../img/modeler-step1.png"
       /></span>
</figure>

<p>Double-click on the Start Event. A text box will open. Name the Start Event <em>Payment Retrieval Requested</em>.</p>

<div class="note bg-info docs-info">
  <h3>Hint</h3>
  <p>When editing Labels, you can add line breaks using <code>Shift + Enter</code>.</p>
</div>

<p>Click on the start event. From its context menu, select the activity shape (rounded rectangle). It will be placed automatically on the canvas, and you can drag it to your preferred position. Name it <em>Charge Credit Card</em>. Change the activity type to <em>Service Task</em> by clicking on the activity shape and using the wrench button.</p>
<figure class="image">
  <span><img
      src="../img/modeler-step2.png"
       /></span>
</figure>

<p>Add an End Event named <em>Payment Received</em>.</p>
<figure class="image">
  <span><img
      src="../img/modeler-step3.png"
       /></span>
</figure>

<h2 id="configure-the-service-task">Configure the Service Task</h2>
<p>There are different ways to <a href="/manual/latest/reference/bpmn20/tasks/service-task/">execute service tasks</a> using CIB seven. In this guide, we&rsquo;ll use the <a href="/manual/latest/user-guide/process-engine/external-tasks/">external task</a> pattern.
Open the Properties Panel within the Camunda Modeler and click on the Service Task you just created. Change the Implementation to <code>External</code> and use <code>charge-card</code> as the Topic.</p>
<figure class="image">
  <span><img
      src="../img/modeler-step4.png"
       /></span>
</figure>

<h2 id="configure-properties-for-execution">Configure Properties for Execution</h2>
<figure class="image">
  <span><img
      src="../img/modeler-step5.png"
       /></span>
</figure>

<p>Because we&rsquo;re modeling an executable process, we should give it an <em>ID</em> and set the <code>isExecutable</code> property to <code>true</code>. On the right-hand side of the canvas, you find the properties panel. When you click on empty space on the modeling canvas, the properties panel will display the properties of the process itself.</p>
<p>First, configure an ID for the process. Type <em>payment-retrieval</em> in the property field <em>Id</em>. The property ID is used by the process engine as an identifier for the executable process, and it&rsquo;s best practice to set it to a human-readable name.</p>
<p>Second, configure the Name of the process. Type <em>Payment Retrieval</em> in the property field <em>Name</em>.</p>
<p>Finally, make sure the box next to the <em>Executable</em> property is checked. If you don&rsquo;t check this box, the process definition is ignored by the process engine.</p>
<h2 id="save-the-bpmn-diagram">Save the BPMN Diagram</h2>
<p>When you&rsquo;re done, save your changes by clicking <em>File &gt; Save File As..</em>. In the dialogue that appears, navigate to a folder of your choice and save the diagram as something like <code>payment.bpmn</code>.</p>

<div class="panel-group gs-download-step-panel" id="gitStep-1">
  <div class="panel panel-success">
    <div class="panel-heading">
      <div class="pull-right">
        <a class="btn btn-success gs-download-step-btn" href="https://github.com/cibseven/cibseven-get-started-quickstart/archive/Step-1.zip">
          <span i class="glyphicon glyphicon-download-alt"></span>
          Source Code Step-1
        </a>
      </div>
      <h4>Catch up: Get the Sources of Step-1.</h4>
      <p class="text-muted">
        <a href="https://github.com/cibseven/cibseven-get-started-quickstart/archive/Step-1.zip">Download as .zip</a>
        or checkout the corresponding tag with <a class="toggle-instructions">Git</a>.
      </p>
    </div>
    <div class="panel-body">
      <p>You can checkout the current state from the <a href="https://github.com/cibseven/cibseven-get-started-quickstart">GitHub repository</a>.</p>
      <p>If you have not cloned the repository yet, please execute the following command:
      <pre class="console">git clone https://github.com/cibseven/cibseven-get-started-quickstart.git</pre>
      </p>
      <p>
      To checkout the current state of the process application please execute the following command:
      <pre class="console">git checkout -f Step-1</pre>
      Or download as archive from <a href="https://github.com/cibseven/cibseven-get-started-quickstart/releases/tag/Step-1">here</a>.
      </p>
    </div>
  </div>
</div>

<h1 id="implement-an-external-task-worker">Implement an external task worker</h1>
<p>After modeling the process, we want to execute some business logic.</p>
<p>CIB seven platform is built so that your business logic can be implemented in different languages.
You have the choice which language suits your project best.</p>
<p>In this quick start, we&rsquo;ll show you how to use ready-to-go task clients for CIB seven in:</p>
<ul>
<li><a href="#a-using-java">Java</a></li>
<li><a href="#b-using-javascript-nodejs">JavaScript (NodeJS)</a></li>
</ul>
<p>If you&rsquo;ve never worked with Java before, we recommend using the JavaScript (NodeJS) task client in this tutorial.</p>

<div class="note bg-info docs-info">
  <h3>Hint</h3>
  <p>If you prefer a different programming language, you can also use <a href="/manual/latest/user-guide/process-engine/external-tasks/#rest-api">REST API</a> to access CIB seven API operations via HTTP.</p>
</div>

<h2 id="a-using-java">a) Using Java</h2>
<p>In this section, you&rsquo;ll learn how to implement an external task worker in Java.</p>
<h3 id="prerequisites">Prerequisites</h3>
<p>Make sure you have the following tools installed:</p>
<ul>
<li>JDK 11</li>
<li>An IDE for Java projects (e.g. <a href="https://eclipse.org/">Eclipse</a>)</li>
</ul>
<h3 id="create-a-new-maven-project">Create a new Maven project</h3>
<p>Start by creating a new Maven project in your IDE. If you&rsquo;re using Eclipse, you can follow these steps:</p>
<p>In Eclipse, go to File / New / Other &hellip;. This opens the New Project Wizard. In the New Project Wizard, select Maven / Maven Project. Click Next.</p>
<p>On the first page of the New Maven Project Wizard, select Create a simple project (you can skip archetype selection). Click Next.</p>
<p>On the second page (see screenshot), configure the Maven coordinates for the project. Since we are setting up a JAR Project, make sure to select Packaging: jar.</p>
<figure class="image">
  <span><img
      src="../img/eclipse-new-project.png"
       /></span>
</figure>

<p>When you&rsquo;re done, click Finish. Eclipse will set up a new Maven project. The project appears in the Project Explorer View.</p>
<h3 id="add-cib-seven-external-task-client-dependency">Add CIB seven External Task Client Dependency</h3>
<p>The next step consists of setting up the Maven dependency to the external task client for your new process application.
Your pom.xml file of your project should look like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&#34;http://maven.apache.org/POM/4.0.0&#34;</span> <span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="na">xsi:schemaLocation=</span><span class="s">&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nt">&lt;groupId&gt;</span>org.cibseven.getstarted<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="nt">&lt;artifactId&gt;</span>charge-card-worker<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="nt">&lt;version&gt;</span>0.0.1-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nt">&lt;properties&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="nt">&lt;external-task-client.version&gt;</span>1.1.0<span class="nt">&lt;/external-task-client.version&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="nt">&lt;maven.compiler.source&gt;</span>11<span class="nt">&lt;/maven.compiler.source&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="nt">&lt;maven.compiler.target&gt;</span>11<span class="nt">&lt;/maven.compiler.target&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="nt">&lt;/properties&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nt">&lt;dependencies&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">			<span class="nt">&lt;groupId&gt;</span>org.cibseven.bpm<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">			<span class="nt">&lt;artifactId&gt;</span>cibseven-external-task-client<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">			<span class="nt">&lt;version&gt;</span>${external-task-client.version}<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">			<span class="nt">&lt;groupId&gt;</span>org.slf4j<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">			<span class="nt">&lt;artifactId&gt;</span>slf4j-simple<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">			<span class="nt">&lt;version&gt;</span>1.7.36<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">			<span class="nt">&lt;groupId&gt;</span>jakarta.xml.bind<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">			<span class="nt">&lt;artifactId&gt;</span>jakarta.xml.bind-api<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">			<span class="nt">&lt;version&gt;</span>4.0.2<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="nt">&lt;/dependencies&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/project&gt;</span>
</span></span></code></pre></div><h3 id="add-the-java-class">Add the Java class</h3>
<p>Next, we will create a new ExternalTaskClient which subscribes to the <code>charge-card</code> topic.</p>
<p>When the process engine encounters a service task that is configured to be externally handled, it creates an external task instance on which our handler will react.
We are using <a href="/manual/latest/user-guide/process-engine/external-tasks/#long-polling-to-fetch-and-lock-external-tasks">Long Polling</a> in the ExternalTaskClient to make the communication more efficient.</p>
<p>Next, you need to create a package, e.g., <em>org.cibseven.getstarted.chargecard</em> and add a Java class, e.g. <em>ChargeCardWorker</em>, to it.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">org.cibseven.getstarted.chargecard</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.logging.Logger</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.awt.Desktop</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.net.URI</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.cibseven.bpm.client.ExternalTaskClient</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ChargeCardWorker</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Logger</span><span class="w"> </span><span class="n">LOGGER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Logger</span><span class="p">.</span><span class="na">getLogger</span><span class="p">(</span><span class="n">ChargeCardWorker</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">ExternalTaskClient</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ExternalTaskClient</span><span class="p">.</span><span class="na">create</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="na">baseUrl</span><span class="p">(</span><span class="s">&#34;http://localhost:8080/engine-rest&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="na">asyncResponseTimeout</span><span class="p">(</span><span class="n">10000</span><span class="p">)</span><span class="w"> </span><span class="c1">// long polling timeout</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// subscribe to an external task topic as specified in the process</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">client</span><span class="p">.</span><span class="na">subscribe</span><span class="p">(</span><span class="s">&#34;charge-card&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="na">lockDuration</span><span class="p">(</span><span class="n">1000</span><span class="p">)</span><span class="w"> </span><span class="c1">// the default lock duration is 20 seconds, but you can override this</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="na">handler</span><span class="p">((</span><span class="n">externalTask</span><span class="p">,</span><span class="w"> </span><span class="n">externalTaskService</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="c1">// Put your business logic here</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="c1">// Get a process variable</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="n">String</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">externalTask</span><span class="p">.</span><span class="na">getVariable</span><span class="p">(</span><span class="s">&#34;item&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="n">Integer</span><span class="w"> </span><span class="n">amount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">externalTask</span><span class="p">.</span><span class="na">getVariable</span><span class="p">(</span><span class="s">&#34;amount&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="n">LOGGER</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&#34;Charging credit card with an amount of &#39;&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">amount</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;&#39;€ for the item &#39;&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;&#39;...&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="n">Desktop</span><span class="p">.</span><span class="na">getDesktop</span><span class="p">().</span><span class="na">browse</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">URI</span><span class="p">(</span><span class="s">&#34;https://docs.cibseven.org/get-started/quick-start/complete&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="c1">// Complete the task</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="n">externalTaskService</span><span class="p">.</span><span class="na">complete</span><span class="p">(</span><span class="n">externalTask</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">})</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="na">open</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><h3 id="run-the-worker">Run the worker</h3>
<p>You can run the Java application by right clicking on the class <code>ChargeCardWorker</code> and choosing <code>Run as Java</code>.</p>
<p>Note that the worker should remain running throughout the entirety of this quick start guide.</p>

<div class="note bg-info docs-info">
  <h3>Next Step</h3>
  <p>Once your worker is running, you can <a href="/get-started/quick-start/deploy/">continue to deploy your process and start some instances</a>.</p>
</div>


<div class="panel-group gs-download-step-panel" id="gitStep-2a">
  <div class="panel panel-success">
    <div class="panel-heading">
      <div class="pull-right">
        <a class="btn btn-success gs-download-step-btn" href="https://github.com/cibseven/cibseven-get-started-quickstart/archive/Step-2a.zip">
          <span i class="glyphicon glyphicon-download-alt"></span>
          Source Code Step-2a
        </a>
      </div>
      <h4>Catch up: Get the Sources of Step-2a.</h4>
      <p class="text-muted">
        <a href="https://github.com/cibseven/cibseven-get-started-quickstart/archive/Step-2a.zip">Download as .zip</a>
        or checkout the corresponding tag with <a class="toggle-instructions">Git</a>.
      </p>
    </div>
    <div class="panel-body">
      <p>You can checkout the current state from the <a href="https://github.com/cibseven/cibseven-get-started-quickstart">GitHub repository</a>.</p>
      <p>If you have not cloned the repository yet, please execute the following command:
      <pre class="console">git clone https://github.com/cibseven/cibseven-get-started-quickstart.git</pre>
      </p>
      <p>
      To checkout the current state of the process application please execute the following command:
      <pre class="console">git checkout -f Step-2a</pre>
      Or download as archive from <a href="https://github.com/cibseven/cibseven-get-started-quickstart/releases/tag/Step-2a">here</a>.
      </p>
    </div>
  </div>
</div>

<h2 id="b-using-javascript-nodejs">b) Using JavaScript (NodeJS)</h2>
<p>In this section, you&rsquo;ll learn how to implement an external task worker in NodeJS.</p>
<h3 id="prerequisites-1">Prerequisites</h3>
<p>Make sure you have the following tools installed:</p>
<ul>
<li>NodeJS &gt;= v16 (<a href="https://nodejs.org/en/download/prebuilt-installer">Download available here</a>)</li>
<li>Editor for JavaScript files (e.g. <a href="https://atom.io/">Atom</a>)</li>
</ul>
<h3 id="create-a-new-nodejs-project">Create a new NodeJS project</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">mkdir charge-card-worker
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> ./charge-card-worker
</span></span><span class="line"><span class="cl">npm init -y
</span></span></code></pre></div><h3 id="update-packagejson-to-enable-es-modules">Update package.json to enable ES modules</h3>
<p>Add the following &ldquo;type&rdquo; field to your package.json file:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nt">&#34;main&#34;</span><span class="p">:</span> <span class="s2">&#34;index.js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;module&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;scripts&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;test&#34;</span><span class="p">:</span> <span class="s2">&#34;echo \&#34;Error: no test specified\&#34; &amp;&amp; exit 1&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></div><h3 id="add-camunda-external-task-client-js-library">Add Camunda External Task Client JS library</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">npm install camunda-external-task-client-js
</span></span><span class="line"><span class="cl">npm install -D open
</span></span></code></pre></div><h3 id="implement-the-nodejs-script">Implement the NodeJS script</h3>
<p>Next, we&rsquo;ll create a new ExternalTaskClient that subscribes to the <code>charge-card</code> topic.</p>
<p>When the process engine encounters a service task that&rsquo;s configured to be externally handled, it creates an external task instance on which our handler will react.
We use <a href="https://docs.camunda.org/manual/latest/user-guide/process-engine/external-tasks/#long-polling-to-fetch-and-lock-external-tasks">Long Polling</a> in the ExternalTaskClient to make the communication more efficient.</p>
<p>Next, you need to create a new JavaScript file, e.g. <code>worker.js</code>, that looks like the following:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Client</span><span class="p">,</span> <span class="nx">logger</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;camunda-external-task-client-js&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">open</span> <span class="nx">from</span> <span class="s1">&#39;open&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// configuration for the Client:
</span></span></span><span class="line"><span class="cl"><span class="c1">//  - &#39;baseUrl&#39;: url to the Process Engine
</span></span></span><span class="line"><span class="cl"><span class="c1">//  - &#39;logger&#39;: utility to automatically log important events
</span></span></span><span class="line"><span class="cl"><span class="c1">//  - &#39;asyncResponseTimeout&#39;: long polling timeout (then a new request will be issued)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">config</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">baseUrl</span><span class="o">:</span> <span class="s1">&#39;http://localhost:8080/engine-rest&#39;</span><span class="p">,</span> <span class="nx">use</span><span class="o">:</span> <span class="nx">logger</span><span class="p">,</span> <span class="nx">asyncResponseTimeout</span><span class="o">:</span> <span class="mi">10000</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// create a Client instance with custom configuration
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Client</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// susbscribe to the topic: &#39;charge-card&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">client</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="s1">&#39;charge-card&#39;</span><span class="p">,</span> <span class="kr">async</span> <span class="kd">function</span><span class="p">({</span> <span class="nx">task</span><span class="p">,</span> <span class="nx">taskService</span> <span class="p">})</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Put your business logic here
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Get a process variable
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">amount</span> <span class="o">=</span> <span class="nx">task</span><span class="p">.</span><span class="nx">variables</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;amount&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">task</span><span class="p">.</span><span class="nx">variables</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;item&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Charging credit card with an amount of </span><span class="si">${</span><span class="nx">amount</span><span class="si">}</span><span class="sb">€ for the item &#39;</span><span class="si">${</span><span class="nx">item</span><span class="si">}</span><span class="sb">&#39;...`</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">open</span><span class="p">(</span><span class="s1">&#39;https://docs.cibseven.org/get-started/quick-start/success&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// Complete the task
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">await</span> <span class="nx">taskService</span><span class="p">.</span><span class="nx">complete</span><span class="p">(</span><span class="nx">task</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></div><h3 id="run-the-nodejs-script">Run the NodeJS script</h3>
<p>You can run the NodeJS script with:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">node ./worker.js
</span></span></code></pre></div><p>Note that the worker should remain running throughout the entirety of this quick start guide.</p>

<div class="note bg-info docs-info">
  <h3>Next Step</h3>
  <p>Once your worker is running, you can move onto the next step to <a href="/get-started/quick-start/deploy/">deploy your process and start some instances</a>.</p>
</div>


<div class="panel-group gs-download-step-panel" id="gitStep-2b">
  <div class="panel panel-success">
    <div class="panel-heading">
      <div class="pull-right">
        <a class="btn btn-success gs-download-step-btn" href="https://github.com/cibseven/cibseven-get-started-quickstart/archive/Step-2b.zip">
          <span i class="glyphicon glyphicon-download-alt"></span>
          Source Code Step-2b
        </a>
      </div>
      <h4>Catch up: Get the Sources of Step-2b.</h4>
      <p class="text-muted">
        <a href="https://github.com/cibseven/cibseven-get-started-quickstart/archive/Step-2b.zip">Download as .zip</a>
        or checkout the corresponding tag with <a class="toggle-instructions">Git</a>.
      </p>
    </div>
    <div class="panel-body">
      <p>You can checkout the current state from the <a href="https://github.com/cibseven/cibseven-get-started-quickstart">GitHub repository</a>.</p>
      <p>If you have not cloned the repository yet, please execute the following command:
      <pre class="console">git clone https://github.com/cibseven/cibseven-get-started-quickstart.git</pre>
      </p>
      <p>
      To checkout the current state of the process application please execute the following command:
      <pre class="console">git checkout -f Step-2b</pre>
      Or download as archive from <a href="https://github.com/cibseven/cibseven-get-started-quickstart/releases/tag/Step-2b">here</a>.
      </p>
    </div>
  </div>
</div>


    </div>
  </div>
</div>

<div class="page-toc">
  <h3>On this Page:</h3>
  <nav id="TableOfContents">
  <ul>
    <li><a href="#create-a-new-bpmn-diagram">Create a new BPMN Diagram</a>
      <ul>
        <li><a href="#start-with-a-simple-process">Start with a Simple Process</a></li>
        <li><a href="#configure-the-service-task">Configure the Service Task</a></li>
        <li><a href="#configure-properties-for-execution">Configure Properties for Execution</a></li>
        <li><a href="#save-the-bpmn-diagram">Save the BPMN Diagram</a></li>
      </ul>
    </li>
    <li><a href="#implement-an-external-task-worker">Implement an external task worker</a>
      <ul>
        <li><a href="#a-using-java">a) Using Java</a>
          <ul>
            <li><a href="#prerequisites">Prerequisites</a></li>
            <li><a href="#create-a-new-maven-project">Create a new Maven project</a></li>
            <li><a href="#add-cib-seven-external-task-client-dependency">Add CIB seven External Task Client Dependency</a></li>
            <li><a href="#add-the-java-class">Add the Java class</a></li>
            <li><a href="#run-the-worker">Run the worker</a></li>
          </ul>
        </li>
        <li><a href="#b-using-javascript-nodejs">b) Using JavaScript (NodeJS)</a>
          <ul>
            <li><a href="#prerequisites-1">Prerequisites</a></li>
            <li><a href="#create-a-new-nodejs-project">Create a new NodeJS project</a></li>
            <li><a href="#update-packagejson-to-enable-es-modules">Update package.json to enable ES modules</a></li>
            <li><a href="#add-camunda-external-task-client-js-library">Add Camunda External Task Client JS library</a></li>
            <li><a href="#implement-the-nodejs-script">Implement the NodeJS script</a></li>
            <li><a href="#run-the-nodejs-script">Run the NodeJS script</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
  <div class="docs-banner" style="display:none">
 :(
</div>

</div>


    
    <footer class="page-footer">
      <div class="row">
        <div class="col-xs-12">

          <p class="pull-right">
            <a href="#" target="_self">Back to top</a>
          </p>

          <p>
            <a href="http://cibseven.org">cibseven.org</a> and <a href="http://docs.cibseven.org">docs.cibseven.org</a> are part of CIB seven project — <a href="https://www.cib.de/en/privacy-policy/">Privacy Statement</a> – <a href="https://www.cib.de/en/legal-advice/">CIB software GmbH</a>
            <br/>The CIB seven documentation is based on <a href="https://docs.camunda.org/">Camunda 7 Docs</a> from Camunda. Some redesign & naming adoptation was made.
          </p>
          <p>
            <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/80x15.png" /></a> The content on this site is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
          </p>
        </div>
      </div>
    </footer>
  </div>


  

  <script type="text/javascript" src="/get-started/js/docs.39f584f7385fbb9e5e3c39b5e3aa08ef6edc341004893361450d669a3dab2ffd.js" integrity="sha256-OfWE9zhfu55ePDm146oI727cNBAEiTNhRQ1mmj2rL/0="></script>
</body>
</html>

