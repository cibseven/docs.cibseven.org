<!DOCTYPE html>
<html class="no-js">
<head>
  
  <meta charset="utf-8" />

  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

  <meta name="viewport" content="width=device-width" />

  <meta name="description" content="documentation of CIB seven" />
  <meta name="keywords" content="camunda, cib seven, open source, free, Apache License, Apache 2.0, workflow, BPMN, BPMN 2.0, camunda.org, bpm, BPMS, engine, platform, process, automation, community, documentation" />
  <meta name="author" content="CIB software, CIB seven community" />
  

  <title>Model, Evaluate and Deploy a Decision Requirements Graph | docs.cibseven.org</title>

  <meta name="generator" content="Hugo 0.136.4">
  <link rel="shortcut icon" href="/get-started/img/favicon.ico" type="image/x-icon" />

  

  <link rel="stylesheet" href="/get-started/css/docs.e9b26ee1769424142dd77a433da276cef5d0772caff5b8e13bdc85064b52d936.css" integrity="sha256-6bJu4XaUJBQt13pDPaJ2zvXQdyyv9bjhO9yFBktS2TY=">
  <link rel="canonical" href="/get-started/dmn/drg/" />
</head>
<body class="">

<nav class="navbar navbar-fixed-top">
  <div class="navbar-container">
    <div class="navbar-header">
      <a href="/" id="logolink">
      <img src="/get-started/img/logo.png" style="padding:0 5px 7px 0;max-width:75%">
        <span class="site-name">Docs</span>
      </a>
    </div>

    <ul class="header-menu">
      
      <li  class="active"  ><a href="/get-started">Get Started</a></li>
      
      <li  ><a href="/manual">CIB seven</a></li>
      
      <li  ><a href="/security">Security</a></li>
      
    </ul>

    <button class="site-menu-toggle">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <div class="search-field">
      <input type="search" class="search-input" placeholder="Search…" />
    </div>

    <ul class="external-menu">
      <li class="external"><a href="https://cibseven.org">cibseven.org</a></li>
    </ul>
  </div>
</nav>

<div class="search-results">
  <ul class="results-list">
  </ul>
  <footer>
    <button class="btn btn-default page previous">
      <span class="glyphicon glyphicon-chevron-left"></span>
    </button>

    <button class="search-close btn btn-default">
      <span class="glyphicon glyphicon-remove"></span>
    </button>

    <button class="btn btn-default page next">
      <span class="glyphicon glyphicon-chevron-right"></span>
    </button>
  </footer>
</div>

<div class="search-underlay"></div>

<nav class="site-menu">
  





<ul class="site-menu-items">
  
    
  <li>
    
      <a href="/get-started/quick-start/" >Quick Start (Java / JS)</a>
      <ul>
        
          
  <li>
    
      <a href="/get-started/quick-start/install/" >Download and Installation</a>
    
  </li>

        
          
  <li>
    
      <a href="/get-started/quick-start/service-task/" >Executable Process</a>
    
  </li>

        
          
  <li>
    
      <a href="/get-started/quick-start/deploy/" >Deploy the Process</a>
    
  </li>

        
          
  <li>
    
      <a href="/get-started/quick-start/user-task/" >Involve Humans</a>
    
  </li>

        
          
  <li>
    
      <a href="/get-started/quick-start/gateway/" >Make It Dynamic</a>
    
  </li>

        
          
  <li>
    
      <a href="/get-started/quick-start/decision-automation/" >Decision Automation</a>
    
  </li>

        
      </ul>
    
  </li>

  
    
  <li>
    
      <a href="/get-started/spring-boot/" >Spring Boot</a>
      <ul>
        
          
  <li>
    
      <a href="/get-started/spring-boot/project-setup/" >Project Setup</a>
    
  </li>

        
          
  <li>
    
      <a href="/get-started/spring-boot/configuration/" >Configuration</a>
    
  </li>

        
          
  <li>
    
      <a href="/get-started/spring-boot/model/" >Model a Process</a>
    
  </li>

        
      </ul>
    
  </li>

  
    
  <li>
    
      <a href="/get-started/dmn/" >DMN</a>
      <ul>
        
          
  <li>
    
      <a href="/get-started/dmn/install/" >Download and Installation</a>
    
  </li>

        
          
  <li>
    
      <a href="/get-started/dmn/project-setup/" >Project Setup</a>
    
  </li>

        
          
  <li>
    
      <a href="/get-started/dmn/model/" >Create a Decision Table</a>
    
  </li>

        
          
  <li>
    
      <a href="/get-started/dmn/deploy/" >Evaluate and Deploy the Decision Table</a>
    
  </li>

        
          
  <li>
    
      <a href="/get-started/dmn/drg/" >Decision Requirements Graph</a>
    
  </li>

        
      </ul>
    
  </li>

  
    
  <li>
    
      <a href="/get-started/apache-maven/" >Maven Coordinates</a>
    
  </li>

  
</ul>


</nav>

<div class="page-wrapper">


<div class="page-content">
  <div class="container-fluid">
    <div class="col-xs-12 content-header">
      <h1 class="page-title">Model, Evaluate and Deploy a Decision Requirements Graph</h1>
    </div>

    <div class="col-xs-12 content-text">
      <p>In this step, we extend the previous example by a second decision <em>Beverages</em> which uses the <em>Dish</em> decision table as input. We model this dependency between the decisions within a Decision Requirements Graph (DRG) using the Camunda Modeler. Then, we adjust the Application class to evaluate the <em>Beverages</em> decision, deploy the web application to Apache Tomcat and verify the result in Cockpit.</p>

<div class="note bg-info docs-info">
  <h3>Decision Requirements Graph vs. Decision Requirements Diagram</h3>
  <p>The visual representation of a Decision Requirements Graph (DRG) is called Decision Requirements Diagram (DRD). In the context of the Camunda Modeler, we name it DRD because we use the visual representation to model the DRG.</p>
</div>

<h1 id="switch-from-decision-table-to-drd">Switch from Decision Table to DRD</h1>
<p>Open the <em>Dish</em> decision table from the previous step. Click on the button &ldquo;View DRD&rdquo; to see the Decision Requirements Diagram (DRD). It contains a single decision with the name <em>Dish</em>.</p>
<figure class="image">
  <span><img
      src="../img/modeler-drd-step1.png"
       /></span>
</figure>

<h1 id="set-the-name-and-the-id-of-the-drd">Set the Name and the Id of the DRD</h1>
<p>Click somewhere on the canvas and open the Property Panel on the right. Change the <a href="/manual/latest/reference/dmn11/drg/#decision-requirements-graph-id">id</a> of the DRD to &ldquo;dinnerDecisions&rdquo;. Next, change the <a href="/manual/latest/reference/dmn11/drg/#decision-requirements-graph-name">name</a> of the DRD to &ldquo;Dinner Decisions&rdquo;.</p>
<figure class="image">
  <span><img
      src="../img/modeler-drd-step2.png"
       /></span>
</figure>

<h1 id="create-a-new-decision-in-the-drd">Create a new Decision in the DRD</h1>
<p>Click on the decision icon of the palette to create a new decision. Then, double-click on the decision and type <em>Beverages</em> to set the name. Change the type of the decision to <em>Decision Table</em> by clicking on the wrench icon next to the &ldquo;Beverages&rdquo; decision and selecting &ldquo;Decision Table&rdquo;. Use the Property Panel on the right side again to set the id to &ldquo;beverages&rdquo;.</p>
<figure class="image">
  <span><img
      src="../img/modeler-drd-step3.png"
       /></span>
</figure>

<p>Next, connect the <em>Dish</em> decision to the <em>Beverages</em> decision to indicate that the <em>Dish</em> decision is a <a href="/manual/latest/reference/dmn11/drg/#required-decisions">required decision</a> of the <em>Beverages</em> decision. That means that it is used as an input for the decision and the output value &ldquo;desiredDish&rdquo; can be accessed there.</p>
<figure class="image">
  <span><img
      src="../img/modeler-drd-step4.png"
       /></span>
</figure>

<p>Click on the top left icon of the <em>Beverages</em> decision to open the decision table.</p>
<h1 id="configure-the-decision-table-and-add-the-rules">Configure the Decision Table and add the Rules</h1>
<p>Configure the <em>Beverages</em> decision table so that it has:</p>
<ul>
<li>one input with label &ldquo;Dish&rdquo;, input expression &ldquo;desiredDish&rdquo; and type &ldquo;string&rdquo;,</li>
<li>second input with label &ldquo;Guests with children&rdquo;, input expression &ldquo;guestsWithChildren&rdquo; and type &ldquo;boolean&rdquo;,</li>
<li>an output with label &ldquo;Beverages&rdquo;, name &ldquo;beverages&rdquo; and type &ldquo;string&rdquo;,</li>
<li>the hit policy &ldquo;COLLECT&rdquo; (with collect operator <em>LIST</em>).</li>
</ul>
<p>Then, fill the table with the rules.</p>
<figure class="image">
  <span><img
      src="../img/modeler-drd-step5.png"
       /></span>
</figure>

<p>Save your changes and replace the existing DMN file in the <code>src/main/resources</code> folder.</p>

<div class="panel-group gs-download-step-panel" id="gitStep-5">
  <div class="panel panel-success">
    <div class="panel-heading">
      <div class="pull-right">
        <a class="btn btn-success gs-download-step-btn" href="https://github.com/cibseven/cibseven-get-started-dmn/archive/Step-5.zip">
          <span i class="glyphicon glyphicon-download-alt"></span>
          Source Code Step-5
        </a>
      </div>
      <h4>Catch up: Get the Sources of Step-5.</h4>
      <p class="text-muted">
        <a href="https://github.com/cibseven/cibseven-get-started-dmn/archive/Step-5.zip">Download as .zip</a>
        or checkout the corresponding tag with <a class="toggle-instructions">Git</a>.
      </p>
    </div>
    <div class="panel-body">
      <p>You can checkout the current state from the <a href="https://github.com/cibseven/cibseven-get-started-dmn">GitHub repository</a>.</p>
      <p>If you have not cloned the repository yet, please execute the following command:
      <pre class="console">git clone https://github.com/cibseven/cibseven-get-started-dmn.git</pre>
      </p>
      <p>
      To checkout the current state of the process application please execute the following command:
      <pre class="console">git checkout -f Step-5</pre>
      Or download as archive from <a href="https://github.com/cibseven/cibseven-get-started-dmn/releases/tag/Step-5">here</a>.
      </p>
    </div>
  </div>
</div>

<h1 id="evaluate-the-decision">Evaluate the Decision</h1>
<p>To evaluate the <em>Beverages</em> decision, we extend the existing method in your Application class and add a new variable &ldquo;guestsWithChildren&rdquo;.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">org.cibseven.getstarted.dmn</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nd">@ProcessApplication</span><span class="p">(</span><span class="s">&#34;Dinner App DMN&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DinnerApplication</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">ServletProcessApplication</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">protected</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Logger</span><span class="w"> </span><span class="n">LOGGER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Logger</span><span class="p">.</span><span class="na">getLogger</span><span class="p">(</span><span class="n">DinnerApplication</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@PostDeploy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">evaluateDecisionTable</span><span class="p">(</span><span class="n">ProcessEngine</span><span class="w"> </span><span class="n">processEngine</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">DecisionService</span><span class="w"> </span><span class="n">decisionService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">processEngine</span><span class="p">.</span><span class="na">getDecisionService</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">VariableMap</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Variables</span><span class="p">.</span><span class="na">createVariables</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="na">putValue</span><span class="p">(</span><span class="s">&#34;season&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;Spring&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="na">putValue</span><span class="p">(</span><span class="s">&#34;guestCount&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">10</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="na">putValue</span><span class="p">(</span><span class="s">&#34;guestsWithChildren&#34;</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">DmnDecisionTableResult</span><span class="w"> </span><span class="n">dishDecisionResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decisionService</span><span class="p">.</span><span class="na">evaluateDecisionTableByKey</span><span class="p">(</span><span class="s">&#34;dish&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">variables</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">String</span><span class="w"> </span><span class="n">desiredDish</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dishDecisionResult</span><span class="p">.</span><span class="na">getSingleEntry</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">LOGGER</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="n">Level</span><span class="p">.</span><span class="na">INFO</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;\n\nDesired dish: {0}\n\n&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">desiredDish</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">DmnDecisionTableResult</span><span class="w"> </span><span class="n">beveragesDecisionResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decisionService</span><span class="p">.</span><span class="na">evaluateDecisionTableByKey</span><span class="p">(</span><span class="s">&#34;beverages&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">variables</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">beverages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">beveragesDecisionResult</span><span class="p">.</span><span class="na">collectEntries</span><span class="p">(</span><span class="s">&#34;beverages&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">LOGGER</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="n">Level</span><span class="p">.</span><span class="na">INFO</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;\n\nDesired beverages: {0}\n\n&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">beverages</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div>
<div class="panel-group gs-download-step-panel" id="gitStep-6">
  <div class="panel panel-success">
    <div class="panel-heading">
      <div class="pull-right">
        <a class="btn btn-success gs-download-step-btn" href="https://github.com/cibseven/cibseven-get-started-dmn/archive/Step-6.zip">
          <span i class="glyphicon glyphicon-download-alt"></span>
          Source Code Step-6
        </a>
      </div>
      <h4>Catch up: Get the Sources of Step-6.</h4>
      <p class="text-muted">
        <a href="https://github.com/cibseven/cibseven-get-started-dmn/archive/Step-6.zip">Download as .zip</a>
        or checkout the corresponding tag with <a class="toggle-instructions">Git</a>.
      </p>
    </div>
    <div class="panel-body">
      <p>You can checkout the current state from the <a href="https://github.com/cibseven/cibseven-get-started-dmn">GitHub repository</a>.</p>
      <p>If you have not cloned the repository yet, please execute the following command:
      <pre class="console">git clone https://github.com/cibseven/cibseven-get-started-dmn.git</pre>
      </p>
      <p>
      To checkout the current state of the process application please execute the following command:
      <pre class="console">git checkout -f Step-6</pre>
      Or download as archive from <a href="https://github.com/cibseven/cibseven-get-started-dmn/releases/tag/Step-6">here</a>.
      </p>
    </div>
  </div>
</div>

<h1 id="build-and-deploy-the-web-application">Build and Deploy the Web Application</h1>
<p>Build the web application with Maven and replace the <code>dinner-dmn-0.1.0-SNAPSHOT.war</code> in the <code>$CIBSEVEN_HOME/server/apache-tomcat/webapps</code> folder.</p>
<p>Check the log file of the Apache Tomcat server. If you see the following log message, the deployment was successful:</p>
<pre class="console">
INFO org.cibseven.commons.logging.BaseLogger.logInfo
ENGINE-07015 Detected @ProcessApplication class 'org.cibseven.getstarted.dish.DishApplication'
INFO org.cibseven.commons.logging.BaseLogger.logInfo
ENGINE-08024 Found processes.xml file at ../webapps/dinner-dmn-0.1.0-SNAPSHOT/WEB-INF/classes/META-INF/processes.xml
INFO org.cibseven.commons.logging.BaseLogger.logInfo
ENGINE-08023 Deployment summary for process archive 'dinner-dmn':

        dinnerDecisions.dmn

INFO org.cibseven.getstarted.dmn.DinnerApplication.evaluateDecisionTable 

Desired dish: Stew

INFO org.cibeven.getstarted.dmn.DinnerApplication.evaluateDecisionTable 

Desired beverages: [Guiness, Water]

INFO org.cibseven.commons.logging.BaseLogger.logInfo
ENGINE-08050 Process application Dinner App DMN successfully deployed
</pre>
<h1 id="verify-the-evaluation-with-cockpit">Verify the Evaluation with Cockpit</h1>
<p>Now, open <a href="http://localhost:8080/camunda/app/cockpit">Cockpit</a> and go to the &ldquo;Decisions&rdquo; section.</p>
<figure class="image">
  <span><img
      src="../img/cockpit-decision-overview-beverages-dmn.png"
       /></span>
</figure>

<p>Then, click on the decision <em>Beverages</em> and select an id to see the historic data of the evaluation.</p>
<figure class="image">
  <span><img
      src="../img/cockpit-decision-history-beverages-dmn.png"
       /></span>
</figure>

<p>Verify that both rules were matched and the output value for the beverages is &ldquo;Guiness&rdquo; and &ldquo;Water&rdquo;.</p>
<p>Note that the <em>Dish</em> decision is evaluated as part of the evaluation of the <em>Beverages</em> decision. It provides the value &ldquo;Stew&rdquo; for the input expression &ldquo;desiredDish&rdquo;.</p>
<h1 id="next-steps">Next Steps</h1>
<p>Next,</p>
<ul>
<li>learn more about DRG by reading the <a href="/manual/reference/dmn11/drg">DMN Reference</a>,</li>
</ul>

    </div>
  </div>
</div>

<div class="page-toc">
  <h3>On this Page:</h3>
  <nav id="TableOfContents"></nav>
  <div class="docs-banner" style="display:none">
 :(
</div>

</div>


    
    <footer class="page-footer">
      <div class="row">
        <div class="col-xs-12">

          <p class="pull-right">
            <a href="#" target="_self">Back to top</a>
          </p>

          <p>
            <a href="http://cibseven.org">cibseven.org</a> and <a href="http://docs.cibseven.org">docs.cibseven.org</a> are part of CIB seven project — <a href="https://www.cib.de/en/privacy-policy/">Privacy Statement</a> – <a href="https://www.cib.de/en/legal-advice/">CIB software GmbH</a>
            <br/>The CIB seven documentation is based on <a href="https://docs.camunda.org/">Camunda 7 Docs</a> from Camunda. Some redesign & naming adoptation was made.
          </p>
          <p>
            <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/80x15.png" /></a> The content on this site is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
          </p>
        </div>
      </div>
    </footer>
  </div>


  

  <script type="text/javascript" src="/get-started/js/docs.534b5c37efccaf6c5359102f6d3ff8d7889b80ee21ca931a5f31e1e4077906c5.js" integrity="sha256-U0tcN&#43;/Mr2xTWRAvbT/414ibgO4hypMaXzHh5Ad5BsU="></script>
</body>
</html>

